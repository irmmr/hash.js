!function(r,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(r="undefined"!=typeof globalThis?globalThis:r||self).Hash=n()}(this,(function(){"use strict";var r=Object.freeze({}),n=function(){},e="?",t=function(r){return r&&"object"==typeof r&&r.constructor===Object},i=function(r,n){var e,u;if(!t(r)||!t(n))return r;for(var o in n)t(n[o])?(r[o]||Object.assign(r,((e={})[o]={},e)),i(r[o],n[o])):Object.assign(r,((u={})[o]=n[o],u));return r},u=function(){};u.defaults=function(){return{getHashCallback:null,setHashCallback:null,getHashFilter:null,setHashFilter:null,getHrefCallback:null,window:null,log:!0,andSymbol:"&",equSymbol:"=",queSymbol:e}},u.instance=function(r){return void 0===r&&(r={}),u.set(r),u},u.clear=function(){u.define(r)},u.reset=function(){u.define(u.defaults())},u.has=function(r){return"object"==typeof u.configs&&r in u.configs},u.define=function(r){"object"==typeof r&&(u.configs=r)},u.set=function(r){if("object"==typeof r){var n=u.configs;u.define(Object.assign(n,r))}},u.get=function(r,n){void 0===r&&(r=null),void 0===n&&(n="");var e=u.configs;if(null==r)return e;var t,i=r.toString().trim().split(".");if(1===i.length){if(u.has(r))return e[r]}else{var o=e,a=!1;for(t in i)if(i.hasOwnProperty(t)){if(void 0===o[i[t]]){a=!1;break}a=!0,o=o[i[t]]}if(a)return o}return n},u.h={isObj:t,deepMerge:i},u.configs=u.defaults();var o=function(){},a="HashJs",f="Hash",c="1.7.5",l='"addEventListener" does not exist in the "window" that you defined',s='The "window" you defined in configs has some problems';function v(r){return null!=r}function d(r){return null==r}function h(r){return"string"==typeof r}function g(r){return"boolean"==typeof r}function p(r){return g(r)?r:h(r)&&"true"===r.toLowerCase()||w(r)&&1===r}function y(r){return null!==r&&"object"==typeof r&&r.constructor===Object}function b(r){return"function"==typeof r}function m(r,n,e){return r.split(n).join(e)}function O(r){var n=Array.prototype.slice.call(arguments).slice(1);if(b(r)){var e={func:r,args:n};return 0!==n.length?r.call(e,n):r.call(e)}return null}function w(r){return null!==r&&!isNaN(r)&&"number"==typeof r}function j(r){return!!d(r)||(h(r)?""===r:q(r)?0===r.length:!!y(r)&&0===E(r))}function H(r){return null==r}function E(r){return v(r)&&y(r)&&Object.entries(r).length||0}function P(r,n){var e=r.split(n);return[e.shift(),e.join(n)]}function q(r){return v(r)&&Array.isArray(r)}function S(r){return h(r)?r:r.toString()}function Q(r){return!!h(r)&&new RegExp(".+(=|).*","g").test(r)}function C(r){if(!Q(r)||j(r))return{};var n=u.get("equSymbol","="),e=u.get("andSymbol","&"),t=r.split(e),i={};return t.forEach((function(r,e){if(j(r))return{};var t=P(r,n),u=r.split(n).length,o=S(t[0]);if(j(o))return{};if(u>=2){var a=S(t[1]);try{a=decodeURIComponent(a)}catch(r){}i[o]=a}else i[o]=null})),i}function k(r,n){if(void 0===n&&(n=!1),j(r=T(r)))return"";var e=[],t=u.get("equSymbol","="),i=u.get("andSymbol","&");return D(r,(function(r){var i=r[0],u=r[1];if(void 0!==u)if(H(u))e.push(i);else{var o=S(u),a=n?encodeURIComponent(o):o;e.push(i+t+a)}})),e.join(i)}function x(r){if(!h(r)||j(r))return!1;var n=u.get("queSymbol",e);if(r.includes(n)){var t=P(r,n)[1];return j(t)||Q(t)}return!0}function R(r){if(!h(r)||j(r))return["",""];var n=[r,""];if(!x(r))return n;var t=u.get("queSymbol",e);return r.includes(t)?P(r,t):n}function U(){var r="",n=I(),e=u.get("getHashCallback");if(b(e))r=O(e);else try{r=n.location.hash}catch(r){A([s,r])}r=S(r);var t=u.get("getHashFilter");return b(t)&&(r=O(t,r)),(r=S(r)).startsWith("#")?r.slice(1):r}function V(r){var n=u.get("setHashCallback"),e=u.get("setHashFilter"),t=I();if(b(e)&&(r=O(e,r)),r=S(r),b(n))O(n,r);else try{t.location.hash=r}catch(r){A([s,r])}}function N(r,n){if(h(r)&&!j(r)&&(r=[r]),!q(r))return{};if(j(r=r.filter((function(r){return""!==r}))))return{};var e={};for(var t in r)r.hasOwnProperty(t)&&(e[r[t]]=n);return e}function F(r){return h(r)||H(r)||void 0===r||w(r)}function L(){var r="",n=I(),e=u.get("getHrefCallback");if(b(e))r=O(e);else try{r=n.location.href}catch(r){A([s,r])}return S(r)}function I(){return u.get("window")||window}function A(r,n){void 0===n&&(n=!1);var e=(r=B(r)).join(", ");if(n||!0===u.get("log"))throw new Error("("+a+") "+e)}function T(r){return y(r)?M(r,(function(r){var n=r[0],e=r[1];return h(n)&&!j(n)&&F(e)})):{}}function W(r){return R(r)[0]}function _(r){return R(r)[1]}function z(r){void 0===r&&(r={});var n="",t={},i=R(U()),o=i[0],a=C(i[1]),f=u.get("queSymbol",e);"value"in r?(n=S(r.value)).includes(f)&&(n=m(n,f,encodeURIComponent(f))):n=o;if("query"in r){var c=r.query,l=c.entry||{},s=c.type||"merge";y(l)&&(l=T(l),"merge"!==s||j(l)?"define"===s&&(t=l):t=Object.assign(a,l))}else t=a;if("string"in r){var v="",d=i[0],h=i[1];return void 0!==r.string.value&&(d=r.string.value),void 0!==r.string.query&&(h=r.string.query),v=d,j(h)||(v+=f+h),void V(v)}var g=n;j(t)||(g+=f+k(t)),V(g)}function B(r,n){return void 0===n&&(n=!0),r=q(r)?r:[r],n&&(r=r.filter((function(r){return!j(r)}))),r}function D(r,n){Object.entries(r).forEach(n)}function M(r,n){return Object.fromEntries(Object.entries(r).filter(n))}function J(r,n){if(void 0===n&&(n=!0),!h(r))return{};r=r.trim();var e=n?r.split(","):[r],t={};return e.forEach((function(r){var n=P(r.trim(),":"),e=decodeURIComponent(n[0]),i=decodeURIComponent(n[1]);j(e)||(t[e]=i)})),t}function K(r,n,e){return h(r)?(h(e)&&("-"===(e=e.trim())&&(e=r.length),e=Number(e)),w(e)?(e<0&&(e=r.length+e),e>0?r.substring(0,e)+n+r.substring(e):n+r):r):r}function G(r,n){if(y(r))return r;if(h(r)&&F(n)&&!j(r)){var e={};return e[r]=n,e}return!1}function X(r){return P(r,"#")[1]||""}function Y(r){return r instanceof RegExp}var Z=Object.freeze({__proto__:null,isDef:v,isUnDef:d,isString:h,isBool:g,getBool:p,isObj:y,isFunc:b,replaceAll:m,lunchFunc:O,isNum:w,isNumeric:function(r){return v(r)&&!isNaN(Number(r))},isEmpty:j,isNull:H,objSize:E,splitOnce:P,splitOnceEnd:function(r,n){var e=r.split(n);return[e.slice(0,e.length-1).join(n),e.pop()]},isArr:q,getString:S,isQuery:Q,getQuery:C,toQuery:k,lenOfChar:function(r,n){return h(r)&&h(n)&&r.includes(n)?r.split("").filter((function(r){return r===n})).length:0},isTrueHash:x,getTrueHash:R,getWinHash:U,setWinHash:V,createObjVal:N,isQueParOk:F,getHref:L,getWindow:I,err:A,filterQueEntry:T,getHashValue:W,getHashQuery:_,setEvHash:z,toArray:B,objForeach:D,objFilter:M,objMap:function(r,n){var e={};if(!b(n))return r;for(var t in r){var i=t,u=r[i],o=n(t,u);q(o)&&2===o.length&&(i=o[0],u=o[1]),e[i]=u}return e},parseKv:J,insertStr:K,toObjQue:G,getUrlHash:X,isRegExp:Y});o.addValue=function(r){if(void 0===r&&(r=""),!h(r)||j(r))return!1;r.includes("?")&&(r=m(r,"?",encodeURIComponent("?")));var n=R(U()),e=n[0],t=n[1];return j(e)||(r=e+r),j(t)||(r+="?"+t),V(r),!0},o.addQuery=function(r){if(void 0===r&&(r={}),!y(r)||0===r.length)return!1;var n=R(U()),e=n[0],t=n[1],i="";if(!j(t)){var u=C(t);r=Object.assign(u,r)}return j(e)||(i+=e),V(i+="?"+k(r)),!0},o.clearValue=function(){var r=U();if(j(r))return!0;if(!x(r))return!1;var n=R(r),e=n[0],t=n[1];return j(e)||V(j(t)?"":"?"+t),!0},o.clearQuery=function(){var r=U();if(j(r))return!0;if(!x(r))return!1;var n=R(r),e=n[0];return j(n[1])||V(e),!0},o.getValue=function(){var r=U();return j(r)?"":R(r)[0]},o.getQuery=function(r){if(void 0===r&&(r=[]),h(r)&&(r=[r]),!q(r))return{};var n=1===(r=r.filter((function(r){return""!==r}))).length?void 0:N(r,void 0),e=U();if(j(e))return n;var t=R(e)[1];if(j(t)||!Q(t))return n;var i=C(t);if(1===r.length)return i.hasOwnProperty(r[0])?i[r[0]]:n;if(0!==r.length){var u,o={};for(u in r)if(r.hasOwnProperty(u)){var a=r[u];o[a]=i.hasOwnProperty(a)?i[a]:void 0}return o}return i},o.haveValue=function(r){if(void 0===r&&(r=""),h(r)&&(r=[r]),!q(r))return!1;var n=o.getValue();if(j(r=r.filter((function(r){return""!==r}))))return!j(n);for(var e in r)if(r.hasOwnProperty(e)&&!n.includes(r[e]))return!1;return!0},o.haveQuery=function(r){if(void 0===r&&(r=[]),h(r)&&(r=[r]),!q(r))return!1;var n=R(U())[1];if(0===r.length)return!j(n);if(!Q(n))return!1;var e,t=C(n);for(e in r)if(r.hasOwnProperty(e)&&!t.hasOwnProperty(r[e]))return!1;return!0},o.isValue=function(r){return h(r)&&o.getValue()===r},o.isQuery=function(r,n){return!(!h(r)||j(r)||!F(n))&&o.getQuery(r)===n},o.updateQuery=function(r,n){if(!h(r)||j(r)||!F(n))return!1;if(void 0===n)return!1;var e=R(U()),t=e[0],i=e[1],u="",o={},a=0;if(j(i))return!1;j(t)||(u+=t);var f,c=C(i);for(f in c)c.hasOwnProperty(f)&&(f===r?(o[f]=n,a++):o[f]=c[f]);return V(u+="?"+k(o)),0!==a},o.removeValue=function(r){if(void 0===r&&(r=[]),h(r)&&!j(r)&&(r=[r]),!q(r)||0===r.length)return!1;var n=U(),e=R(n),t=e[0],i=e[1],u="";if(j(n)||j(t))return!1;for(var o in r)if(r.hasOwnProperty(o)){var a=r[o];t.includes(a)&&(t=m(t,a,""))}return u+=t,j(i)||(u+="?"+i),V(u),!0},o.removeQuery=function(r){if(void 0===r&&(r=[]),h(r)&&!j(r)&&(r=[r]),!q(r)||0===r.length)return!1;var n=U(),e=R(n),t=e[0],i=e[1],u="",o={};if(j(n)||j(i))return!1;var a,f=C(i);for(a in f)f.hasOwnProperty(a)&&(r.includes(a)||(o[a]=f[a]));return j(t)||(u+=t),0!==E(o)&&(u+="?"+k(o)),V(u),!0},o.setValue=function(r){if(void 0===r&&(r=""),!h(r)||j(r))return!1;r.includes("?")&&(r=m(r,"?",encodeURIComponent("?")));var n=U(),e=R(n)[1];return j(n)||j(e)?(V(r),!0):(V(r+"?"+e),!0)},o.setQuery=function(r){if(void 0===r&&(r={}),!y(r)||0===r.length)return!1;var n=U(),e=R(n)[0],t=k(r);return j(n)||j(e)?(V("?"+t),!0):(V(e+"?"+t),!0)},o.add=function(r,n){void 0===n&&(n={position:"after",multiple:!1});var e=o;if(!h(r)||j(r))return e;var t=U(),i="";h(n)&&(n={position:n});var u=n.position||"after",a=p(n.multiple||!1);!j(u)&&h(u)||(u="after");var f=J(u,!1);if("after"in f){var c=f.after;i=j(c)?t+r:a?m(t,c,c+r):t.replace(c,c+r)}else if("before"in f){var l=f.before;i=j(l)?r+t:a?m(t,l,r+l):t.replace(l,r+l)}else"index"in f&&(i=K(t,r,f.index));return j(i)||V(i),e},o.clear=function(r){void 0===r&&(r=!0);var n=o;return!0===r?history.pushState(null,null,P(L(),"#")[0]):n.have()&&V(""),n},o.get=function(){return U()},o.have=function(r){if(void 0===r&&(r=""),!q(r=B(r)))return!1;var n=U();if(j(r))return!j(n);for(var e in r)if(!r.hasOwnProperty(e)||!n.includes(r[e]))return!1;return!0},o.is=function(r){return h(r)&&U()===r};var $=!1,rr=!1;o.isLocked=function(){return $},o.unlock=function(){return $&&!rr&&($=!1),o},o.lock=function(r){void 0===r&&(r={});var n=o;if($||!y(r))return n;rr=p(r.force||!1);var e=U(),t=I();return void 0!==t.onhashchange&&(t.onhashchange=function(){$&&V(e)},$=!0),n},o.remove=function(r){void 0===r&&(r=[]);var n=o;if(j(r=B(r)))return n;var e=U(),t=e;return j(e)||(r.forEach((function(r){h(r)?t.includes(r)&&(t=m(t,r,"")):Y(r)&&(t=t.replace(r,""))})),t!==e&&V(t)),n},o.set=function(r){void 0===r&&(r="");var n=o;return h(r)?(V(r),n):n},o.replace=function(r,n){var e=o;return h(n)&&(h(r)||Y(r))?(V(U().replace(r,n)),e):e},o.event=o.on=function(r,e){void 0===e&&(e=n);var t=o;if(!h(r))return t;var i=m(r,","," "),u=I();if(e=b(e)?e:n,void 0===u.addEventListener)return A(l),t;var a=i.split(" ").filter((function(r){return!j(r)})),f=[];return a.forEach((function(r){f.includes(r)||f.push(r)})),f.forEach((function(r){switch(r){case"change":u.addEventListener("hashchange",(function(r){var n=X(r.newURL||""),t=X(r.oldURL||"");O(e,r,{oldHash:t,newHash:n})}));break;case"load":u.addEventListener("load",e);break;case"ready":O(e)}})),t},o.info=function(){return{version:c,name:a,module:f}};var nr=function(){},er=function(){},tr=function(){};tr.add=function(r,n){void 0===n&&(n={position:"after",multiple:!1});var e=tr;if(!h(r)||j(r))return e;var t=W(U()),i="";h(n)&&(n={position:n});var u=n.position||"after",o=p(n.multiple||!1);!j(u)&&h(u)||(u="after");var a=J(u,!1);if("after"in a){var f=a.after;i=j(f)?t+r:o?m(t,f,f+r):t.replace(f,f+r)}else if("before"in a){var c=a.before;i=j(c)?r+t:o?m(t,c,r+c):t.replace(c,r+c)}else"index"in a&&(i=K(t,r,a.index));return j(i)||z({value:i}),e},tr.clear=function(){var r=tr;return r.have()&&z({value:""}),r},tr.get=function(){return W(U())},tr.have=function(r){if(void 0===r&&(r=""),!q(r=B(r)))return!1;var n=tr.get();if(j(r))return!j(n);for(var e in r)if(r.hasOwnProperty(e)&&!n.includes(r[e]))return!1;return!0},tr.is=function(r){return h(r)&&tr.get()===r},tr.set=function(r){var n=tr;return h(r)?(z({value:r}),n):n},tr.replace=function(r,n){var e=tr;if(!h(n)||!h(r)&&!Y(r))return e;var t=W(U());return j(t)||z({string:{value:t.replace(r,n)}}),e},tr.remove=function(r){void 0===r&&(r=[]);var n=tr;if(j(r=B(r)))return n;var e=W(U()),t=e;return j(e)||(r.forEach((function(r){h(r)?t.includes(r)&&(t=m(t,r,"")):Y(r)&&(t=t.replace(r,""))})),t!==e&&z({value:t})),n},o.value=o.v=tr,nr.add=function(r,n){void 0===n&&(n=null);var e=nr;if(!(r=G(r,n))||!y(r))return e;var t=e.get();return j(t)||(r=M(r,(function(r){var n=r[0];return r[1],!t.hasOwnProperty(n)}))),j(r)||z({query:{entry:Object.assign(t,r)}}),e},nr.clear=function(){var r=nr,n=W(U());return r.have()?(j(n)?V(""):V(n),r):r},nr.define=function(r){var n=nr;return y(r)?(z({query:{entry:r,type:"define"}}),n):n},nr.get=function(r){if(void 0===r&&(r=[]),!q(r=B(r)))return{};var n=1===r.length?void 0:N(r,void 0),e=U();if(j(e))return n;var t=_(e);if(j(t)||!Q(t))return n;var i=C(t),u=r.length;if(0===u)return i;if(1===u){var o=r[0];return i.hasOwnProperty(o)?i[o]:n}var a={};for(var f in r)if(r.hasOwnProperty(f)){var c=r[f];a[c]=i.hasOwnProperty(c)?i[c]:void 0}return a},nr.have=function(r){if(void 0===r&&(r=""),!q(r=B(r)))return!1;var n=nr.get();if(j(r))return!j(n);for(var e in r)if(!r.hasOwnProperty(e)||!n.hasOwnProperty(r[e]))return!1;return!0},nr.is=function(r,n){return h(r)&&nr.get(r)===n},nr.set=function(r,n){void 0===n&&(n=null);var e=nr;return(r=G(r,n))&&y(r)?(z({query:{entry:r}}),e):e},nr.update=function(r,n){void 0===n&&(n=null);var e=nr;return(r=G(r,n))&&y(r)&&e.have()?j(r=M(r,(function(r){var n=r[0];return void 0!==r[1]&&e.have(n)})))?e:e.set(r):e},nr.remove=function(r){void 0===r&&(r=[]);var n=nr;if(j(r=B(r)))return n;var e=n.get(),t=e;return j(e)||e!==(t=M(t,(function(n){var e=n[0];return n[1],!r.includes(e)})))&&n.define(t),n},er.set=function(r){var n=er;return h(r)?(z({string:{query:r}}),n):n},er.get=function(){return _(U())},er.have=function(r){if(void 0===r&&(r=""),!q(r=B(r)))return!1;var n=er.get();if(j(r))return!j(n);for(var e in r)if(r.hasOwnProperty(e)&&!n.includes(r[e]))return!1;return!0},er.is=function(r){return h(r)&&er.get()===r},er.replace=function(r,n){var e=er;if(!h(n)||!h(r)&&!Y(r))return e;var t=_(U());return j(t)||z({string:{query:t.replace(r,n)}}),e},er.remove=function(r){void 0===r&&(r=[]);var n=er;if(j(r=B(r)))return n;var e=_(U()),t=e;return j(e)||(r.forEach((function(r){h(r)?t.includes(r)&&(t=m(t,r,"")):Y(r)&&(t=t.replace(r,""))})),t!==e&&z({string:{query:t}})),n},er.add=function(r,n){void 0===n&&(n={position:"after",multiple:!1});var e=er;if(!h(r)||j(r))return e;var t=_(U()),i="";h(n)&&(n={position:n});var u=n.position||"after",o=p(n.multiple||!1);!j(u)&&h(u)||(u="after");var a=J(u,!1);if("after"in a){var f=a.after;i=j(f)?t+r:o?m(t,f,f+r):t.replace(f,f+r)}else if("before"in a){var c=a.before;i=j(c)?r+t:o?m(t,c,r+c):t.replace(c,r+c)}else"index"in a&&(i=K(t,r,a.index));return j(i)||z({string:{query:i}}),e},nr.str=er,o.query=o.q=nr;var ir={components:o,config:u};return Object.assign({config:ir.config.instance,h:Z},ir.components)}));
