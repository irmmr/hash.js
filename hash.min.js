/*
* HashJs library (v1.0)
* Copyright 2019-2020 by irmmr
* Licenced by personal use
*/
!function(e){"use strict";var t={version:"1.0.0",author:"irmmr",description:"Hash.js is a simple js library . By this library you can manage page hash . Hash.js has different parts for add , get , change and extract .",git_url:"https://github.com/irmmr/hash.js",lang:"English",help:"Please go on github page . address : %s",message:"** Hash.js library | v %v **\nSimple & Useful\nBy: %s\nAbout: %r\nGithub: %p",remove_error:"hash.js Info : After see all information, please remove hash.info function from your source."},o={load_error:"hash.js : can't load z.js",test:"hash.js : It's work ! please remove z.test function .",untitled_message:"untitled",error_element:"hash.js : Error to find element . we can't find %s in window hash",error_remove:'hash.js : Error to find "%s" in window hash',error_referrer:"hash.js : For check referrer url , you should add url first . for exa : example.referrer('https://url.com')",change_hash:'#%r : hash changed to "%s"',hash_first:'#%r : first hash is "%s"',hash_log_start:"hash.js Log : start is Date %r and Time %p",set_error:"hash.js : Error to set hash , please input text value . for exa : example.set({ text : 'hello' })",set_have_error:'hash.js : Error to set hash element , in your hash "%s" exits ! we just set the text',warning_loop:"hash.js : Remove loop number is bigger than 50 . please check that !",remove_empty:"hash.js : Remove function must has words and loop for start",test_message:"hash.js is active ! for more you can run '.help' in Hash.info()",hash_log_info:"hash.js Log is working : for disable hash log, remove hash.log from your source . we write your page all hash changing !",error_symbol_array:"hash.js : Symbol value must be add like {} . for exa : { before : '/' , after : '=' }",hash_saved_find:'hash.js : We can\'t find the "%s" cookie for get window hash, please check cookie name .',error_set_vap:'hash.js : We can\'t set window hash. The type of "#%s" element is not %r.',spa_el_error:'hash.js SPA : Error to get "%s". please check el id, that should be start with a "#"',spa_router:'hash.js SPA : This router have not any "{any}" to find.',replace_error:'hash.js Element : We can\'t find "%s" in "%r".',replace_error_bn:"hash.js Element : Please set to and from in syntax .",debug_start:"hash.js Debug is started!\nThis log all actions in router and spa .\nFor disable, remove debug from SPA function!",dls:'Load "%s" component\nStatus: success\nType: %r',func_error:'hash.js SPA : Error to find "%s" function.',app_run:'hash.js App : App running on "%s"',app_run_time:'hash.js App : App run in "%s" date code',app_own_id:'hash.js App : App warning to get h-app id. for easy run we set that\'s id to "%s", please set an id for h-app.',event_error_empty:"hash.js Event : event type required.\nHash.event(type, function)",event_error:"hash.js Event : event type is incorrect. (%s)"},n=e=>{if("boolean"==typeof e)return e;switch(e.toLowerCase()){case"true":return!0;case"false":default:return!1}},r=(e,t)=>e.hasAttribute(t)?e.getAttribute(t):"";class a extends HTMLElement{constructor(){super();var t=r(this,"link"),o=!1;this.hasAttribute("h-top")&&(o=n(this.getAttribute("h-top")));var a=document.createElement("style");a.textContent="h-link{cursor:pointer}",document.getElementsByTagName("head")[0].appendChild(a),this.onclick=function(){this.hasAttribute("link")&&(e.location.hash=t),o&&(document.body.scrollTop=0,document.documentElement.scrollTop=0)}}}class s extends HTMLElement{constructor(){super();var t=r(this,"app"),a=r(this,"log"),s=r(this,"if-load"),l=r(this,"if-change"),i=r(this,"if");if(a=n(a),this.hasAttribute("id"))var c=this.getAttribute("id");else{this.setAttribute("id","hashJsAppLoadMentId");c="hashJsAppLoadMentId";console.warn(o.app_own_id.replace("%s",c))}if(""!==t)for(var h=this.getElementsByTagName("h-main"),d=0;d<h.length;d++){var p=this.getElementsByTagName("h-main")[d];if(p.hasAttribute("id")&&p.getAttribute("id")==t&&(console.info(o.app_run.replace("%s",t)),console.info(o.app_run_time.replace("%s",Date.now())),a)){for(var m=[],u=this.getElementsByTagName("h-header"),f=0;f<u.length;f++)m[f]=this.getElementsByTagName("h-header")[f].innerHTML;for(var v=[],g=this.getElementsByTagName("h-footer"),y=0;y<g.length;y++)v[y]=this.getElementsByTagName("h-footer")[y].innerHTML;for(var _=[],b=this.getElementsByTagName("h-main"),E=0;E<b.length;E++)_[E]=this.getElementsByTagName("h-main")[E].innerHTML;var x={header:m,app:_,footer:v};console.log("App returned first: ",x)}}if(""!==s){var w=document.createElement("script");w.textContent=s,document.body.appendChild(w)}function T(){if(""!==t&&""!==i){var e=document.createElement("script");e.textContent=`\n                    if (${i}) {\n                        document.getElementById('${c}').style.display = "block";\n                    } else {\n                        document.getElementById('${c}').style.display = "none";\n                    }`,document.body.appendChild(e)}}T(),e.addEventListener("hashchange",function(){if(""!==l){var e=document.createElement("script");e.textContent=l,document.body.appendChild(e)}T()});var j=document.createElement("style");j.textContent="h-app{margin:0;display:block}",document.getElementsByTagName("head")[0].appendChild(j)}}class l extends HTMLElement{constructor(){super();var e=document.createElement("style");e.textContent="h-header{margin:0;display:block}",document.getElementsByTagName("head")[0].appendChild(e)}}class i extends HTMLElement{constructor(){super();var e=document.createElement("style");e.textContent="h-footer{margin:0;display:block}",document.getElementsByTagName("head")[0].appendChild(e)}}class c extends HTMLElement{constructor(){super();var e=document.createElement("style");e.textContent="h-main{margin:0;display:block}",document.getElementsByTagName("head")[0].appendChild(e)}}var h=()=>{},d=e=>{console.error(o.func_error.replace("%s",e))},p=(e,t,o)=>e.replace(new RegExp(t,"g"),o),m=t=>{var o=t.split("/"),n=e.location.hash.slice(1).split("/"),r="";o.forEach((e,t)=>{"{any}"==e&&(r+=t)}),r=r.split("");var a="",s="";return o.length==n.length&&n.forEach((e,t)=>{o[t]!=e&&"{any}"!=o[t]||("{any}"==o[t]?(s+=e+",",a+=1):a+=1)}),a.length==n.length?{status:!0,info:s}:{status:!1}},u=(e,t=null)=>{void 0!==e&&("function"==typeof e?null!==t?e(t):e():d(e))},f=(t,o,n,r,a)=>{""==e.location.hash&&null!==a.defualt&&(e.location.hash=a.defualt),a.router=void 0!==a.router&&Array.isArray(a.router)?a.router:[];var s="";if(a.router.forEach(e=>{s+=m(e).status?1:""}),""==s)if(e.location.hash.includes("/")){let n=e.location.hash.slice(1).split("/");n.length;if(void 0!==o[n[0]])switch(n.length){case 2:o[n[0]].loop=void 0!==o[n[0]].loop?o[n[0]].loop:{},void 0!==o[n[0]]&&void 0!==o[n[0]].loop[n[1]]&&void 0!==o[n[0]].loop[n[1]].main&&void 0!==o[n[0]].loop[n[1]].title?(document.getElementById(t).innerHTML=o[n[0]].loop[n[1]].main,document.title=o[n[0]].loop[n[1]].title,u(o[n[0]].loop[n[1]].do)):""==s&&(document.getElementById(t).innerHTML=r.render,document.title=r.title,u(r.do));break;case 3:o[n[0]].loop=void 0!==o[n[0]].loop?o[n[0]].loop:{},o[n[0]].loop[n[1]]=void 0!==o[n[0]].loop[n[1]]?o[n[0]].loop[n[1]]:{},o[n[0]].loop[n[1]].loop=void 0!==o[n[0]].loop[n[1]].loop?o[n[0]].loop[n[1]].loop:{},void 0!==o[n[0]]&&void 0!==o[n[0]].loop[n[1]].loop[n[2]]&&void 0!==o[n[0]].loop[n[1]].loop[n[2]].main&&void 0!==o[n[0]].loop[n[1]].loop[n[2]].title?(document.getElementById(t).innerHTML=o[n[0]].loop[n[1]].loop[n[2]].main,document.title=o[n[0]].loop[n[1]].loop[n[2]].title,u(o[n[0]].loop[n[1]].loop[n[2]].do)):""==s&&(document.getElementById(t).innerHTML=r.render,document.title=r.title,u(r.do));break;case 4:o[n[0]].loop=void 0!==o[n[0]].loop?o[n[0]].loop:{},o[n[0]].loop[n[1]]=void 0!==o[n[0]].loop[n[1]]?o[n[0]].loop[n[1]]:{},o[n[0]].loop[n[1]].loop=void 0!==o[n[0]].loop[n[1]].loop?o[n[0]].loop[n[1]].loop:{},o[n[0]].loop[n[1]].loop[n[2]]=void 0!==o[n[0]].loop[n[1]].loop[n[2]]?o[n[0]].loop[n[1]].loop[n[2]]:{},o[n[0]].loop[n[1]].loop[n[2]].loop=void 0!==o[n[0]].loop[n[1]].loop[n[2]].loop?o[n[0]].loop[n[1]].loop[n[2]].loop:{},void 0!==o[n[0]]&&void 0!==o[n[0]].loop[n[1]].loop[n[2]].loop[n[3]]&&void 0!==o[n[0]].loop[n[1]].loop[n[2]].loop[n[3]].main&&void 0!==o[n[0]].loop[n[1]].loop[n[2]].loop[n[3]].title?(document.getElementById(t).innerHTML=o[n[0]].loop[n[1]].loop[n[2]].loop[n[3]].main,document.title=o[n[0]].loop[n[1]].loop[n[2]].loop[n[3]].title,u(o[n[0]].loop[n[1]].loop[n[2]].loop[n[3]].do)):""==s&&(document.getElementById(t).innerHTML=r.render,document.title=r.title,u(r.do));break;default:""==s&&(document.getElementById(t).innerHTML=r.render,document.title=r.title,u(r.do))}else""==s&&(document.getElementById(t).innerHTML=r.render,document.title=r.title,u(r.do))}else void 0!==o[n]?(document.getElementById(t).innerHTML=a.components[n].main,document.title=a.components[n].title,u(a.components[n].do)):""==s&&(document.getElementById(t).innerHTML=r.render,document.title=r.title,u(r.do))},v=(t,o,n,r,a,s)=>{var l=t;if((t=m(t)).status){var i={};if(""!==o)return void 0!==t.info&&(t.info=t.info.split(","),t.info.forEach((e,t)=>{r=p(r,"{HS:"+ ++t+"}",e),o=p(o,"{HS:"+t+"}",e)}),t.info,i.info=t.info),document.getElementById(n).innerHTML=o,document.title=r,i.el=n,i.router=l,i.hash=e.location.hash.slice(1),u(a,i),s?t.info:[]}};const g={lib:function(t={}){t.log=void 0===t.log||t.log;var n="boolean"!=typeof t.log||t.log;this.hash=e.location.hash,this.href=e.location.href,this.test=function(){return n?console.info(o.test_message):alert(o.test_message),!0},this.auto=function(t={}){t=void 0!==t?t:{};const o=""!==e.location.hash;if(t.save=void 0!==t.save?t.save:{},t.save.active=void 0!==t.save.active&&((1==t.save.active||0==t.save.active)&&t.save.active),t.save.days="number"!=typeof t.save.days?10:t.save.days,t.save.name=void 0!==t.save.days?t.save.name:"hash",t.save.active&&o&&(e.onhashchange=function(){var o=new Date;o.setTime(o.getTime()+24*t.save.days*60*60*1e3);var n="expires="+o.toUTCString();document.cookie="hashJs_"+t.save.name+"="+e.location.hash.slice(1)+";"+n+";path=/"}),t.meta=void 0!==t.meta?t.meta:{},t.meta.active=void 0!==t.meta.active&&((1==t.meta.active||0==t.meta.active)&&t.meta.active),t.meta.space=void 0!==t.meta.space?t.meta.space:"-",t.meta.escape=void 0!==t.meta.escape&&((1==t.meta.escape||0==t.meta.escape)&&t.meta.escape),t.meta.active&&o)for(t.meta.escape&&(e.location.hash=escape(e.location.hash.slice(1)));e.location.hash.includes("%20")||e.location.hash.includes(" ")||e.location.hash.includes("%2520");)e.location.hash=p(e.location.hash," ",t.meta.space),e.location.hash=p(e.location.hash,"%20",t.meta.space),e.location.hash=p(e.location.hash,"%2520",t.meta.space)},this.remove=function(t={}){if(void 0!==t&&t!=={}){t.log="boolean"!=typeof t.log||t.log,void 0!==t.words?t.words=Array.isArray(t.words)?Array.from(new Set(t.words)):[t.words]:t.words=[],t.words=t.words.filter(e=>""!==e);for(var r={ok:[],no:[]},a=0;a<t.words.length;a++)e.location.hash.includes(t.words[a])||e.location.hash.includes(escape(t.words[a]))?(e.location.hash=p(e.location.hash,t.words[a],""),e.location.hash=p(e.location.hash,escape(t.words[a]),""),r.ok.push(t.words[a])):(n&&t.log&&console.warn(o.error_remove.replace("%s",t.words[a])),r.no.push(t.words[a]));return r}return n&&t.log&&console.error(o.remove_empty),!1},this.ref=function(e=""){return""!==e?""!==document.referrer&&document.referrer==e:document.referrer},this.have=function(t=""){return""!==e.location.hash&&(""==t||!!e.location.hash.includes(t))},this.clear=function(t={}){if(t.all="boolean"!=typeof t.all||t.all,t.all){e.location.hash="";var o=e.location.href.replace(/#.*$/,"");e.history.replaceState("",document.title,o)}else""!==e.location.hash&&(e.location.hash="");return!0},this.get=function(t=!0,r={}){if(r=={})return t?e.location.hash.slice(1):e.location.hash;if(void 0!==r.saved&&""!==r.saved&&" "!==r.saved){for(var a="",s="hashJs_"+r.saved+"=",l=document.cookie.split(";"),i=0;i<l.length;i++){for(var c=l[i];" "==c.charAt(0);)c=c.substring(1);if(0==c.indexOf(s))a=c.substring(s.length,c.length)}return""!==a?a:(n&&console.warn(o.hash_saved_find.replace("%s",r.saved)),"")}if(r.element=void 0!==r.element?r.element:"",e.location.hash.includes(r.element)){var h=r.element.length;return t?e.location.hash.slice(1+h):e.location.hash.slice(h)}return n&&console.warn(o.error_element.replace("%s",r.element)),""},this.set=function(t={}){if(void 0!==t.text)if(t.type=void 0!==t.type?t.type:"",void 0!==t.element)if(t.element.name=void 0!==t.element.name?t.element.name:"",t.element.symbol=void 0!==t.element.symbol?t.element.symbol:{before:"",after:""},"string"==typeof t.element.symbol||"number"==typeof t.element.symbol||"boolean"==typeof t.element.symbol||Array.isArray(t.element.symbol))n&&console.error(o.error_symbol_array);else{t.element.symbol.before=void 0!==t.element.symbol.before?t.element.symbol.before:"",t.element.symbol.after=void 0!==t.element.symbol.after?t.element.symbol.after:"";var r,a=t.element.symbol.before,s=t.element.symbol.after;if(a+t.element.name+s!=="")if(void 0!==t.text.el)switch(t.text.el=t.text.el.startsWith("#")?t.text.el.replace("#",""):"",t.text.type=void 0===t.text.type||"value"!=t.text.type&&"html"!=t.text.type?"html":t.text.type,void 0===(r="value"==t.text.type?document.getElementById(t.text.el).value:document.getElementById(t.text.el).innerHTML)&&(r="",n&&console.error(o.error_set_vap.replace("%s",t.text.el).replace("%r",t.text.type))),t.type){case"json":e.location.hash=a+t.element.name+s+JSON.stringify(r);break;case"escape":e.location.hash=a+t.element.name+s+escape(r);break;default:e.location.hash=a+t.element.name+s+r}else switch(t.type){case"json":e.location.hash=a+t.element.name+s+JSON.stringify(t.text);break;case"escape":e.location.hash=a+t.element.name+s+escape(t.text);break;default:e.location.hash=a+t.element.name+s+t.text}}else if(void 0!==t.text.el)switch(t.text.el=t.text.el.startsWith("#")?t.text.el.replace("#",""):"",t.text.type=void 0===t.text.type||"value"!=t.text.type&&"html"!=t.text.type?"html":t.text.type,void 0===(r="value"==t.text.type?document.getElementById(t.text.el).value:document.getElementById(t.text.el).innerHTML)&&(r="",n&&console.error(o.error_set_vap.replace("%s",t.text.el).replace("%r",t.text.type))),t.type){case"json":e.location.hash=JSON.stringify(r);break;case"escape":e.location.hash=escape(r);break;default:e.location.hash=r}else switch(t.type){case"json":e.location.hash=JSON.stringify(t.text);break;case"escape":e.location.hash=escape(t.text);break;default:e.location.hash=t.text}else n&&console.error(o.set_error)},this.lock=function(){const t=e.location.hash;e.onhashchange=function(){e.location.hash=t}}},info:function(e={}){this.status=!0,this.version=t.version,this.author=t.author,this.about=t.description,this.git=t.git_url,this.lang=t.lang,this.help=t.help.replace("%s",t.git_url),this.log=function(){return console.info(t.message.replace("%v",t.version).replace("%s",t.author).replace("%r",t.description).replace("%p",t.git_url)),console.info(t.remove_error),!0},this.addons={data:void 0!==g.data,load:void 0!==g.load,toolitop:void 0!==g.toolitop}},log:function(t={}){var n=new Date,r=n.getFullYear()+"/"+n.getMonth()+"/"+n.getDay(),a=n.getHours()+":"+n.getMinutes()+":"+n.getSeconds()+":"+n.getMilliseconds();this.runDate=r,this.runTime=a,this.start=(()=>{if(console.info(o.hash_log_info),console.info(o.hash_log_start.replace("%r",r).replace("%p",a)),e.location.hash.includes("/")){let t=e.location.hash.slice(1).split("/");console.log(o.hash_first.replace("%s",e.location.hash.slice(1)).replace("%r",Date.now()),t)}else console.log(o.hash_first.replace("%s",e.location.hash.slice(1)).replace("%r",Date.now()));return e.addEventListener("hashchange",function(){var t=e.location.hash.slice(1);if(t.includes("/")){var n=t.split("/");console.log(o.change_hash.replace("%s",t).replace("%r",Date.now()),n)}else console.log(o.change_hash.replace("%s",t).replace("%r",Date.now()))}),!0})},SPA:function(t={}){t.log="boolean"!=typeof t.log||t.log;var n=t.log;t.el=void 0!==t.el?t.el:"";t.el.startsWith("#")&&"string"==typeof t.el?(!0,t.el=t.el.replace("#","")):(!1,n&&console.error(o.spa_el_error.replace("%s",t.el))),t.components=void 0!==t.components?t.components:{},t.defualt=void 0!==t.defualt?t.defualt:null,t.errors=void 0!==t.errors?t.errors:{},t.errors.not_found=void 0!==t.errors.not_found?t.errors.not_found:{render:"",title:""},t.errors.not_found.render=void 0!==t.errors.not_found.render?t.errors.not_found.render:"",t.errors.not_found.title=void 0!==t.errors.not_found.title?t.errors.not_found.title:"",f(t.el,t.components,e.location.hash.slice(1),t.errors.not_found,t),e.onhashchange=function(){f(t.el,t.components,e.location.hash.slice(1),t.errors.not_found,t)},this.router=((t={})=>{t.render=void 0!==t.render?t.render:"",t.el=void 0!==t.el?t.el:"";t.el.startsWith("#")&&"string"==typeof t.el?(!0,t.el=t.el.replace("#","")):(!1,n&&console.error(o.spa_el_error.replace("%s",t.el))),t.Router=void 0!==t.Router?t.Router:"",t.title=void 0!==t.title?t.title:"",t.do=void 0!==t.do?"function"==typeof t.do?t.do:d.call(this,t.do):h,t.return="boolean"==typeof t.return&&t.return,t.Router.includes("{any}")?(v(t.Router,t.render,t.el,t.title,t.do,t.return),e.addEventListener("hashchange",function(){v(t.Router,t.render,t.el,t.title,t.do,t.return)})):n&&console.error(o.spa_router)})},El:function(e={}){this.replace=((e={})=>{e.text=void 0!==e.text?e.text:"",e.replace=void 0!==e.replace&&Array.isArray(e.replace)?e.replace:{};for(var t=0;t<e.replace.length;t++)null!==e.replace[t]&&"object"==typeof e.replace[t]&&(e.replace[t].from=void 0!==e.replace[t].from?e.replace[t].from:null,e.replace[t].to=void 0!==e.replace[t].to?e.replace[t].to:null,null!==e.replace[t].from&&null!==e.replace[t].to?e.text.includes(e.replace[t].from)?e.text=p(e.text,e.replace[t].from,e.replace[t].to):console.warn(o.replace_error.replace("%s",e.replace[t].from).replace("%r",e.text)):console.error(o.replace_error_bn));return e.text}),this.create=((e={})=>{return e.type=void 0!==e.type?e.type:"div",e.class=void 0!==e.class?' class="'+e.class+'" ':"",e.render=void 0!==e.render?e.render:"",e.id=void 0!==e.id?' id="'+e.id+'"':"",e.add=void 0!==e.add?e.add:"",`<${e.type}${e.class}${e.id}${e.add}>${e.render}</${e.type}>`}),this.app=((e={})=>{if(e.el=void 0!==e.el?e.el:"",e.name=void 0!==e.name?"{{"+e.name+"}}":null,e.return="boolean"==typeof e.return&&e.return,e.render=void 0!==e.render?e.render:"",e.append="boolean"!=typeof e.append||e.append,""!==e.el&&e.el.startsWith("#")){if(e.el=e.el.replace("#",""),null!==e.name&&(e.append&&(document.getElementById(e.el).innerHTML=p(document.getElementById(e.el).innerHTML,e.name,e.render)),e.return)){var t=document.getElementById(e.el).innerHTML;return t=p(t,e.name,e.render)}}else console.error(o.spa_el_error.replace("SPA","Element").replace("%s",e.el));return""})},event:function(t,n){if(n="function"==typeof n?n:function(){},""!==(t="string"==typeof t?t.toLowerCase():""))switch(t){case"change":return e.addEventListener("hashchange",n),!0;default:console.warn(o.event_error.replace("%s",t))}else console.warn(o.event_error_empty);return!1},ready:!0};var y=!1;"function"==typeof define&&define.amd?(define(g),y=!0):(e.Hash=g,y=!0),"object"==typeof exports&&(module.exports=g(),y=!0),y?e.addEventListener("load",()=>{customElements.define("h-link",a),customElements.define("h-app",s),customElements.define("h-header",l),customElements.define("h-footer",i),customElements.define("h-main",c)}):console.error(o.load_error)}(window);